# Workflow Execution Features - Visual Architecture

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND APPLICATION                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Workflow Editor Page                             â”‚  â”‚
â”‚  â”‚  - React Flow Canvas                                          â”‚  â”‚
â”‚  â”‚  - Node Palette                                               â”‚  â”‚
â”‚  â”‚  - Node Editor                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                        â”‚
â”‚                              â”‚ Uses                                   â”‚
â”‚                              â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         useWorkflowExecution Hook (Enhanced)                  â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  State Management:                                            â”‚  â”‚
â”‚  â”‚  â€¢ execution: ExecutionState                                  â”‚  â”‚
â”‚  â”‚  â€¢ breakpoints: Map<string, BreakpointConfig>                 â”‚  â”‚
â”‚  â”‚  â€¢ variables: Map<string, VariableSnapshot>                   â”‚  â”‚
â”‚  â”‚  â€¢ history: WorkflowExecutionHistory[]                        â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Execution Control:                                           â”‚  â”‚
â”‚  â”‚  â€¢ start() - Begin execution                                  â”‚  â”‚
â”‚  â”‚  â€¢ pause() - Pause execution                                  â”‚  â”‚
â”‚  â”‚  â€¢ resume() - Continue execution                              â”‚  â”‚
â”‚  â”‚  â€¢ stop() - Halt execution                                    â”‚  â”‚
â”‚  â”‚  â€¢ executeStep() - Execute next node (step mode)              â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Debugging Features:                                          â”‚  â”‚
â”‚  â”‚  â€¢ toggleBreakpoint(nodeId)                                   â”‚  â”‚
â”‚  â”‚  â€¢ setBreakpointCondition(nodeId, condition)                  â”‚  â”‚
â”‚  â”‚  â€¢ captureVariables(nodeId, input, output, context)           â”‚  â”‚
â”‚  â”‚  â€¢ toggleStepMode()                                           â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  History Management:                                          â”‚  â”‚
â”‚  â”‚  â€¢ saveExecutionToHistory(state)                              â”‚  â”‚
â”‚  â”‚  â€¢ loadHistoryEntry(index)                                    â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Backend Integration:                                         â”‚  â”‚
â”‚  â”‚  â€¢ connectWebSocket(executionId)                              â”‚  â”‚
â”‚  â”‚  â€¢ WebSocket event handlers                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                        â”‚
â”‚                              â”‚ Renders                                â”‚
â”‚                              â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           ExecutionVisualizer Component (Enhanced)            â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  Header: Status | Controls | Mode Toggles              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Status: idle/running/paused/completed/failed         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Controls: â–¶ï¸ â¸ï¸ â¹ï¸ ğŸ”„                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Toggles: ğŸ‘£ ğŸ› ğŸ‘ï¸ ğŸ• ğŸ“‹                               â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  Node Status Grid                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ğŸ”´Nodeâ”‚ â”‚ğŸ”µNodeâ”‚ â”‚âœ…Nodeâ”‚ â”‚âŒNodeâ”‚                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  1   â”‚ â”‚  2   â”‚ â”‚  3   â”‚ â”‚  4   â”‚                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  BP set   Current  Complete Failed                      â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ› Breakpoints Panel (Red theme)                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ List of active breakpoints                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Conditions (optional)                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Remove buttons                                      â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ‘ï¸ Variables Panel (Purple theme)                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Input:  { data: "..." }                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Output: { result: "..." }                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Context: { count: 5, status: "ok" }                   â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ• History Panel (Indigo theme)                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  âœ… 2024-01-15 10:30:45 - 2.3s                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  âœ… 2024-01-15 10:25:12 - 2.1s                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  âŒ 2024-01-15 10:20:33 - 1.8s (failed)                â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  ğŸ“‹ Logs Panel (Gray theme)                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  [10:30:45] [node_1] Starting execution...             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  [10:30:46] [node_2] Processing data...                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  [10:30:47] Breakpoint hit at node_3                   â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚ WebSocket (Backend Mode)
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BACKEND APPLICATION                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        WorkflowExecutionGateway (WebSocket)                   â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Connection Management:                                       â”‚  â”‚
â”‚  â”‚  â€¢ handleConnection(client)                                   â”‚  â”‚
â”‚  â”‚  â€¢ handleDisconnect(client)                                   â”‚  â”‚
â”‚  â”‚  â€¢ subscription tracking                                      â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Event Handlers:                                              â”‚  â”‚
â”‚  â”‚  â€¢ subscribe-execution                                        â”‚  â”‚
â”‚  â”‚  â€¢ unsubscribe-execution                                      â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Event Emitters:                                              â”‚  â”‚
â”‚  â”‚  â€¢ emitNodeStart(executionId, nodeId, timestamp)              â”‚  â”‚
â”‚  â”‚  â€¢ emitNodeComplete(executionId, nodeId, output, vars)        â”‚  â”‚
â”‚  â”‚  â€¢ emitNodeError(executionId, nodeId, error)                  â”‚  â”‚
â”‚  â”‚  â€¢ emitEdgeActivate(executionId, edgeId)                      â”‚  â”‚
â”‚  â”‚  â€¢ emitExecutionComplete(executionId)                         â”‚  â”‚
â”‚  â”‚  â€¢ emitExecutionFailed(executionId, error)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                        â”‚
â”‚                              â”‚ Integrates with                        â”‚
â”‚                              â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           WorkflowExecutorService                             â”‚  â”‚
â”‚  â”‚  â€¢ Execute workflows on backend                               â”‚  â”‚
â”‚  â”‚  â€¢ Emit events via gateway                                    â”‚  â”‚
â”‚  â”‚  â€¢ Handle node execution                                      â”‚  â”‚
â”‚  â”‚  â€¢ Manage execution state                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Execution Flow Diagrams

### 1. Normal Execution Flow

```
User clicks "Play"
       â”‚
       â–¼
   start() called
       â”‚
       â–¼
Set status = 'running'
       â”‚
       â–¼
Clear previous state
       â”‚
       â–¼
Find trigger nodes
       â”‚
       â–¼
Execute each node â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                  â”‚
       â–¼                  â”‚
Check if stopped â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (Loop)
       â”‚                  â”‚
       â–¼                  â”‚
Update node state         â”‚
       â”‚                  â”‚
       â–¼                  â”‚
Capture variables         â”‚
       â”‚                  â”‚
       â–¼                  â”‚
Simulate work (delay)     â”‚
       â”‚                  â”‚
       â–¼                  â”‚
Mark complete             â”‚
       â”‚                  â”‚
       â–¼                  â”‚
Find next nodes           â”‚
       â”‚                  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
Set status = 'completed'
       â”‚
       â–¼
Save to history
       â”‚
       â–¼
   Done âœ“
```

### 2. Step-by-Step Execution Flow

```
User enables step mode (ğŸ‘£)
       â”‚
       â–¼
stepMode = true
       â”‚
       â–¼
User clicks "Play"
       â”‚
       â–¼
   start() called
       â”‚
       â–¼
Execute first node
       â”‚
       â–¼
waitingForStep = true â”€â”€â”€â”€â”€â”€â”
       â”‚                    â”‚
       â–¼                    â”‚
Show "Step" button          â”‚
       â”‚                    â”‚
       â–¼                    â”‚
Wait for user... â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (Wait loop)
       â”‚                    â”‚
       â–¼                    â”‚
User clicks "Step"          â”‚
       â”‚                    â”‚
       â–¼                    â”‚
executeStep() called        â”‚
       â”‚                    â”‚
       â–¼                    â”‚
waitingForStep = false      â”‚
       â”‚                    â”‚
       â–¼                    â”‚
Execute current node        â”‚
       â”‚                    â”‚
       â–¼                    â”‚
Move to next node           â”‚
       â”‚                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
Repeat until complete
       â”‚
       â–¼
   Done âœ“
```

### 3. Breakpoint Execution Flow

```
User sets breakpoint on node_3
       â”‚
       â–¼
breakpoints.set('node_3', { enabled: true })
       â”‚
       â–¼
User clicks "Play"
       â”‚
       â–¼
Execute node_1
       â”‚
       â–¼
Execute node_2
       â”‚
       â–¼
About to execute node_3
       â”‚
       â–¼
Check for breakpoint â”€â”€Yesâ”€â”€â”
       â”‚                     â”‚
       â–¼                     â–¼
Breakpoint found?      Check condition
       â”‚               (if present)
       No                    â”‚
       â”‚                     â–¼
       â”‚               Condition true?
       â”‚                     â”‚
       â”‚                     Yes
       â”‚                     â”‚
       â”‚                     â–¼
       â”‚               Set isPaused = true
       â”‚                     â”‚
       â”‚                     â–¼
       â”‚               Show "Resume" button
       â”‚                     â”‚
       â”‚                     â–¼
       â”‚               Wait for resume... â—„â”€â”€â”
       â”‚                     â”‚               â”‚
       â”‚                     â–¼               â”‚
       â”‚               User clicks "Resume"  â”‚
       â”‚                     â”‚               â”‚
       â”‚                     â–¼               â”‚
       â”‚               isPaused = false      â”‚
       â”‚                     â”‚               â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    Continue execution
                             â”‚
                             â–¼
                          Done âœ“
```

### 4. Backend Integration Flow

```
User sets mode = 'backend'
       â”‚
       â–¼
User clicks "Play"
       â”‚
       â–¼
POST /workflows/:id/execute
       â”‚
       â–¼
Backend returns executionId
       â”‚
       â–¼
connectWebSocket(executionId)
       â”‚
       â–¼
WebSocket connection established
       â”‚
       â–¼
Subscribe to execution
       â”‚
       â–¼
Backend executes workflow â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                            â”‚
       â–¼                            â”‚
Backend emits events:               â”‚
  â€¢ node-start                      â”‚
  â€¢ node-complete â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â€¢ node-error                      â”‚
  â€¢ edge-activate                   â”‚
       â”‚                            â”‚
       â–¼                            â”‚
Frontend receives events            â”‚
       â”‚                            â”‚
       â–¼                            â”‚
Update UI state                     â”‚
  â€¢ Node status                     â”‚
  â€¢ Variables                       â”‚
  â€¢ Logs                            â”‚
       â”‚                            â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
Backend emits execution-complete
       â”‚
       â–¼
Update final status
       â”‚
       â–¼
Close WebSocket
       â”‚
       â–¼
   Done âœ“
```

### 5. Variable Inspection Flow

```
Node execution starts
       â”‚
       â–¼
captureVariables() called
       â”‚
       â–¼
Create snapshot:
  â€¢ nodeId
  â€¢ timestamp
  â€¢ inputData
  â€¢ outputData
  â€¢ variables (context)
       â”‚
       â–¼
Store in variables Map
       â”‚
       â–¼
User opens variables panel
       â”‚
       â–¼
Get current node variables
       â”‚
       â–¼
Display in UI:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Input:  { data: ... }   â”‚
â”‚ Output: { result: ... } â”‚
â”‚ Context: { count: 5 }   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
User inspects data
       â”‚
       â–¼
   Done âœ“
```

### 6. History and Replay Flow

```
Execution completes
       â”‚
       â–¼
saveExecutionToHistory() called
       â”‚
       â–¼
Create history entry:
  â€¢ id (timestamp-based)
  â€¢ workflowId
  â€¢ startTime / endTime
  â€¢ status
  â€¢ nodeStates
  â€¢ logs
  â€¢ variables
       â”‚
       â–¼
Add to history array
(keep last 50)
       â”‚
       â–¼
User opens history panel
       â”‚
       â–¼
Display list of executions
       â”‚
       â–¼
User clicks entry
       â”‚
       â–¼
loadHistoryEntry(index) called
       â”‚
       â–¼
Restore state:
  â€¢ execution status
  â€¢ node states
  â€¢ logs
  â€¢ variables
       â”‚
       â–¼
UI updates to show
historical execution
       â”‚
       â–¼
User can inspect as if
it just happened
       â”‚
       â–¼
   Done âœ“
```

## Feature Interaction Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Feature    â”‚ Breakpoint â”‚   Step   â”‚ Backend â”‚ Variables â”‚ History â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Breakpoint   â”‚     -      â”‚   âœ“ Â¹    â”‚   âœ“ Â²   â”‚     âœ“     â”‚    âœ“    â”‚
â”‚ Step Mode    â”‚     âœ“      â”‚    -     â”‚   âœ“ Â³   â”‚     âœ“     â”‚    âœ“    â”‚
â”‚ Backend      â”‚     âœ“      â”‚   âœ“ Â³    â”‚    -    â”‚     âœ“     â”‚    âœ“    â”‚
â”‚ Variables    â”‚     âœ“      â”‚   âœ“      â”‚   âœ“     â”‚     -     â”‚    âœ“    â”‚
â”‚ History      â”‚     âœ“      â”‚   âœ“      â”‚   âœ“     â”‚     âœ“     â”‚    -    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Â¹ Can use breakpoints in step mode (pause before and at breakpoint)
Â² Breakpoints work in backend mode (backend respects them)
Â³ Step mode works with backend (frontend controls stepping)
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USER INTERACTIONS                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚             â”‚             â”‚             â”‚
         â–¼             â–¼             â–¼             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Play  â”‚   â”‚  Step   â”‚   â”‚Toggle BPâ”‚   â”‚ View    â”‚
    â”‚ Button â”‚   â”‚ Button  â”‚   â”‚  Button â”‚   â”‚Variablesâ”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚            â”‚              â”‚             â”‚
         â”‚            â”‚              â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   useWorkflowExecution Hook         â”‚
         â”‚                                     â”‚
         â”‚  State Updates:                     â”‚
         â”‚  â€¢ execution                        â”‚
         â”‚  â€¢ breakpoints                      â”‚
         â”‚  â€¢ variables                        â”‚
         â”‚  â€¢ history                          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   ExecutionVisualizer Component     â”‚
         â”‚                                     â”‚
         â”‚  Visual Updates:                    â”‚
         â”‚  â€¢ Node status colors               â”‚
         â”‚  â€¢ Panel visibility                 â”‚
         â”‚  â€¢ Logs display                     â”‚
         â”‚  â€¢ Variables display                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Summary

This architecture provides:

âœ… **Modular Design** - Each feature is self-contained
âœ… **Extensible** - Easy to add new features
âœ… **Real-time** - WebSocket for live updates
âœ… **User-friendly** - Intuitive UI controls
âœ… **Powerful** - Professional debugging capabilities
âœ… **Flexible** - Multiple execution modes
âœ… **Performant** - Optimized state management

The system integrates seamlessly with the existing workflow editor and provides debugging capabilities comparable to commercial platforms.
